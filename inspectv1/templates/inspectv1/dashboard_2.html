{% extends 'inspectv1/base.html' %}
{% load custom_template_tag %}
{% load bootstrap4%}
{%load static%}
{% block content %}

<section class="datefilters">
    <div class="container mb-2">
        <h5 class='page-title datefilterheader'> <a class="" data-toggle="collapse" href="#collapsefilters"
                aria-expanded="false" aria-controls="collapsefilters">
                Date Filters
            </a></h5>
        <div class="collapse" id="collapsefilters">
            <div class="row">
                <div class="col">
                    <form action="#" method="get" class="form">
                        {% csrf_token %}
                        {% bootstrap_field form.start_date layout='horizontal'%}
                </div>
                <div class="col">
                    {% bootstrap_field form.end_date layout='horizontal'%}
                </div>
                <div>

                    <button type="submit" class="btn btn-primary" name="dates">
                        Filter Dates
                    </button>
                    </form>
                </div>


            </div>
        </div>
</section>

<!--Section for charts based on previous selection-->
<section class="dashdetails">
    <div class="container mb-2">
        <h5 class='page-title'>
            Chart
        </h5>
    </div>

</section>

<!--Section for table listing of all sites and issues -->
<section class="sitesvisited">
    <div class="container mb-2">
        <div class="row">
            <div class="col">
                <h5 class='page-title'>Details</h5>
                <div class="dashtable">
                    <table id="mytable" class="table  display">

                        <thead>

                            <tr>
                                <th>Site No.</th>
                                <th>Station</th>
                                <th>Date Visited</th>
                                <th>Field</th>
                                <th>Issue</th>
                                <th>Risk</th>
                                <th>Category</th>
                                <th>State</th>
                                <th>Subsidiary</th>
                            </tr>
                        </thead>
                        {%if sitedata%}
                        <tbody>

                            {% for x in sitedata %}
                            <tr>
                                <td>{{x.siteno}}</td>
                                <td>{{x.name}}</td>
                                <td>{{x.dateadd}}</td>
                                <td>{{x.category}}</td>
                                <td>{{x.itemname}}</td>
                                <td>{{x.severity}}</td>
                                <td>{{x.errortype}}</td>
                                <td>{{x.state}}</td>
                                <td>{{x.subsidiary}}</td>

                            </tr>
                            {%endfor%}
                        </tbody>

                        {%endif%}
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>


<script>
    $(document).ready(function () {
        $('#mytable').DataTable();
    });
</script>

{% endblock content %}